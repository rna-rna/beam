Here are the most common reasons why the URL might be updating but the UI stays stuck (i.e. it never shows “This folder is empty”):

The route you’re using doesn’t match the URL you’re navigating to.
Wouter isn’t re-rendering because query strings aren’t always recognized as a route change, depending on how you set it up.
There’s a type mismatch (e.g., gallery.folderId is a string while currentFolder is a number), causing the .filter() to yield no results.
Below are a few tips to fix it.

1. Use a Full Path in setLocation
Right now in your sidebar, you do:

tsx
Copy
onClick={() => setLocation(`?folder=${folder.id}`)}
If you’re already at the path "/dashboard", and you call setLocation("?folder=8"), Wouter might interpret that as moving to "/?folder=8" instead of "/dashboard?folder=8".

That can lead to a route mismatch if you have a <Route path="/dashboard" ...> but you’re suddenly at "/".
Fix: Try specifying the full path:

tsx
Copy
onClick={() => setLocation(`/dashboard?folder=${folder.id}`)}
Then, in MainContent, location will be "/dashboard?folder=8" instead of "/?folder=8".

2. Verify Your <Route> Definition
Make sure you have something like this somewhere in your app:

tsx
Copy
import { Route, Router } from "wouter";
import { Dashboard } from "./Dashboard"; // or however you structure it

export function App() {
  return (
    <Router>
      <Route path="/dashboard" component={Dashboard} />
    </Router>
  );
}
If Route is missing or you only have a route for "/" but none for "/dashboard", then going to "/dashboard?folder=8" might not trigger the re-render you expect.

3. Confirm You’re Parsing the Query String in MainContent
You’re already doing:

tsx
Copy
const params = new URLSearchParams(location.split("?")[1]);
const folderParam = params.get("folder");
const currentFolder = folderParam ? parseInt(folderParam, 10) : null;
That should work if location looks like "/dashboard?folder=8". If location instead looks like "/?folder=8", then location.split("?")[0] is "/", so it’s a different route than "/dashboard".

Debug It
Add a quick console.log to see the actual string you’re getting:

tsx
Copy
console.log("location:", location);
console.log("folderParam:", folderParam);
console.log("currentFolder:", currentFolder);
If you see location: "/?folder=8", that means you never ended up at "/dashboard?folder=8".