The error "relation 'recently_viewed_galleries' does not exist" indicates that the database is attempting to track recently viewed galleries, but the table recently_viewed_galleries is missing.

Root Cause:
The backend attempts to insert or query from recently_viewed_galleries during gallery view tracking.
The error code: '42P01' is a PostgreSQL error that signals a missing table or relation.
Fix:
1. Create the Missing Table (recently_viewed_galleries):
Connect to Your Database (Neon or Postgres):

bash
Copy code
psql -h <db-host> -U <username> -d <database>
Run the Table Creation SQL (DDL):

sql
Copy code
CREATE TABLE recently_viewed_galleries (
  id SERIAL PRIMARY KEY,
  userId VARCHAR(255) NOT NULL,
  projectId INTEGER NOT NULL,
  viewedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(userId, projectId)
);
Confirm the Table Exists:

sql
Copy code
\dt
Ensure recently_viewed_galleries appears in the list of tables.

2. Verify Backend Code (routes.ts) to Ensure Proper Table Usage:
Locate the route responsible for tracking views (/api/galleries/:id/view):

javascript
Copy code
app.post('/api/galleries/:id/view', async (req, res) => {
  const { userId } = req.body;
  const projectId = req.params.id;

  try {
    // Upsert or insert into recently viewed
    await db.recently_viewed_galleries.upsert({
      where: { userId, projectId },
      update: { viewedAt: new Date() },
      create: { userId, projectId }
    });
    res.status(200).json({ success: true });
  } catch (error) {
    console.error('Failed to track gallery view:', error);
    res.status(500).json({ message: 'Failed to track gallery view' });
  }
});
Check for Typos:

Ensure the table name recently_viewed_galleries is consistently used across queries.
3. Test the Fix:
Restart the Server after the table is created:

bash
Copy code
npm run dev
Visit a Gallery Page and check the console/logs:

bash
Copy code
GET /api/galleries/recent
If the error no longer appears, the table is now functioning as intended.
If the error persists, ensure the table name and schema match exactly.
